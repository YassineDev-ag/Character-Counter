<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Character Counter</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#9c4dff',
            secondary: '#7b2cff',
            accent: {
              purple: '#bb6bff',
              orange: '#ffb74d',
              red: '#ff8a65'
            }
          },
          fontFamily: {
            sans: ['Segoe UI', 'Tahoma', 'Geneva', 'Verdana', 'sans-serif']
          }
        }
      }
    }
  </script>
  <style type="text/tailwindcss">
    @layer utilities {
      .stat-box {
        @apply relative overflow-hidden rounded-xl p-6 text-white;
      }
      .stat-number {
        @apply text-3xl md:text-4xl font-bold;
      }
      .stat-label {
        @apply text-xs md:text-sm font-medium opacity-90 mt-1;
      }
      .letter-bar {
        @apply h-2 rounded-full bg-purple-400 w-full;
      }
      .letter-row {
        @apply flex items-center gap-3 mb-2;
      }
      .letter-name {
        @apply w-6 text-sm font-medium;
      }
      .letter-count {
        @apply text-xs ml-auto;
      }
    }
  </style>
</head>
<body class="bg-white transition-colors duration-200 dark:bg-gray-900 font-sans">
  <div class="min-h-screen max-w-4xl mx-auto px-4 py-8">
    <header class="flex items-center justify-between mb-8">
      <div class="flex items-center space-x-3">
        <div class="w-8 h-8 rounded-full bg-gradient-to-r from-primary to-secondary flex items-center justify-center text-white font-bold">
          C
        </div>
        <h1 class="text-xl font-bold text-gray-800 dark:text-white">Character Counter</h1>
      </div>
      
      <button id="theme-toggle" class="p-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
        </svg>
      </button>
    </header>

    <main class="mb-12">
      <h2 class="text-3xl md:text-4xl font-bold text-center mb-8 text-gray-800 dark:text-white">
        Analyze your text<br class="hidden md:block" />in real-time.
      </h2>

      <div class="mb-6">
        <textarea 
          id="textInput"
          placeholder="Start typing here... (or paste your text)"
          class="w-full min-h-[150px] p-4 rounded-xl border border-gray-300 bg-white text-gray-800 placeholder-gray-500 focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:placeholder-gray-400"
        ></textarea>
      </div>

      <div class="flex flex-wrap items-center justify-between gap-4 mb-8">
        <div class="flex items-center space-x-2">
          <input 
            type="checkbox" 
            id="excludeSpaces" 
            class="w-4 h-4 text-primary rounded focus:ring-primary dark:bg-gray-700 dark:border-gray-600"
          >
          <label for="excludeSpaces" class="text-gray-700 dark:text-gray-300">Exclude Spaces</label>
        </div>
        
        <div class="flex items-center space-x-2">
          <input 
            type="checkbox" 
            id="setLimit" 
            class="w-4 h-4 text-primary rounded focus:ring-primary dark:bg-gray-700 dark:border-gray-600"
          >
          <label for="setLimit" class="text-gray-700 dark:text-gray-300">Set Character Limit</label>
        </div>
        
        <div class="text-gray-600 dark:text-gray-400">
          Approx. reading time: <span id="readingTime" class="font-medium">0 minute</span>
        </div>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8">
        <div class="stat-box bg-gradient-to-r from-purple-400 to-purple-600 relative">
          <div class="absolute top-2 right-2 opacity-20">
            <svg width="40" height="40" viewBox="0 0 40 40" fill="white">
              <circle cx="10" cy="10" r="8" />
              <circle cx="30" cy="10" r="8" />
              <circle cx="10" cy="30" r="8" />
              <circle cx="30" cy="30" r="8" />
            </svg>
          </div>
          <div class="stat-number" id="charCount">00</div>
          <div class="stat-label">Total Characters</div>
        </div>
        
        <div class="stat-box bg-gradient-to-r from-orange-400 to-orange-600 relative">
          <div class="absolute top-2 right-2 opacity-20">
            <svg width="40" height="40" viewBox="0 0 40 40" fill="white">
              <rect x="0" y="0" width="18" height="18" />
              <rect x="22" y="0" width="18" height="18" />
              <rect x="0" y="22" width="18" height="18" />
              <rect x="22" y="22" width="18" height="18" />
            </svg>
          </div>
          <div class="stat-number" id="wordCount">00</div>
          <div class="stat-label">Word Count</div>
        </div>
        
        <div class="stat-box bg-gradient-to-r from-red-400 to-red-600 relative">
          <div class="absolute top-2 right-2 opacity-20">
            <svg width="40" height="40" viewBox="0 0 40 40" fill="white">
              <rect x="0" y="0" width="40" height="8" />
              <rect x="0" y="16" width="40" height="8" />
              <rect x="0" y="32" width="40" height="8" />
            </svg>
          </div>
          <div class="stat-number" id="sentenceCount">00</div>
          <div class="stat-label">Sentence Count</div>
        </div>
      </div>

      <div class="bg-gray-50 dark:bg-gray-800 rounded-xl p-6">
        <h3 class="text-xl font-bold mb-4 text-gray-800 dark:text-white">Letter Density</h3>
        
        <div id="letterDensityContainer" class="space-y-2">
        </div>

        <button id="seeMoreBtn" class="mt-4 text-sm text-primary hover:text-purple-700 dark:text-purple-400 dark:hover:text-purple-300 font-medium flex items-center">
          See more ↓
        </button>
      </div>
    </main>
  </div>

  <script>
    const themeToggle = document.getElementById('theme-toggle');
    const html = document.documentElement;
    
    if (localStorage.theme === 'dark' || 
        (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      html.classList.add('dark');
    } else {
      html.classList.remove('dark');
    }
    
    themeToggle.addEventListener('click', () => {
      html.classList.toggle('dark');
      localStorage.setItem('theme', html.classList.contains('dark') ? 'dark' : 'light');
      
      const icon = themeToggle.querySelector('svg');
      if (html.classList.contains('dark')) {
        icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />';
      } else {
        icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />';
      }
    });

    const textInput = document.getElementById('textInput');
    const charCount = document.getElementById('charCount');
    const wordCount = document.getElementById('wordCount');
    const sentenceCount = document.getElementById('sentenceCount');
    const readingTime = document.getElementById('readingTime');
    const excludeSpaces = document.getElementById('excludeSpaces');
    const letterDensityContainer = document.getElementById('letterDensityContainer');
    const seeMoreBtn = document.getElementById('seeMoreBtn');

    let showAllLetters = false;

    function updateStats() {
      let text = textInput.value;
      let charCountVal = text.length;
      let wordCountVal = 0;
      let sentenceCountVal = 0;
      let readingTimeVal = 0;
      let letterFreq = {};

      if (excludeSpaces.checked) {
        text = text.replace(/\s/g, '');
        charCountVal = text.length;
      }

      if (text.trim()) {
        wordCountVal = text.trim().split(/\s+/).length;
      }

      if (text.trim()) {
        sentenceCountVal = text.split(/[.!?]+/).filter(s => s.trim()).length;
      }

      readingTimeVal = Math.ceil(wordCountVal / 200);

      if (text) {
        const letters = text.toLowerCase().replace(/[^a-z]/g, '');
        for (let char of letters) {
          letterFreq[char] = (letterFreq[char] || 0) + 1;
        }
      }

      charCount.textContent = String(charCountVal).padStart(2, '0');
      wordCount.textContent = String(wordCountVal).padStart(2, '0');
      sentenceCount.textContent = String(sentenceCountVal).padStart(2, '0');
      readingTime.textContent = readingTimeVal 
        ? `${readingTimeVal} minute${readingTimeVal > 1 ? 's' : ''}`
        : '0 minute';

      renderLetterDensity(letterFreq);
    }

    function renderLetterDensity(letterFreq) {
      const totalLetters = Object.values(letterFreq).reduce((sum, val) => sum + val, 0);
      
      const allLetters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
      
      const sortedLetters = allLetters
        .map(letter => ({
          letter: letter.toLowerCase(),
          count: letterFreq[letter.toLowerCase()] || 0,
          percentage: totalLetters > 0 ? ((letterFreq[letter.toLowerCase()] || 0) / totalLetters * 100).toFixed(2) : 0
        }))
        .filter(item => item.count > 0)
        .sort((a, b) => b.count - a.count);

      const lettersToShow = showAllLetters ? sortedLetters : sortedLetters.slice(0, 5);

      let html = '';
      lettersToShow.forEach(({ letter, count, percentage }) => {
        const barWidth = totalLetters > 0 ? (count / totalLetters * 100) : 0;
        html += `
          <div class="letter-row">
            <span class="letter-name">${letter.toUpperCase()}</span>
            <div class="flex-1 bg-gray-300 dark:bg-gray-700 rounded-full overflow-hidden">
              <div class="letter-bar" style="width: ${barWidth}%"></div>
            </div>
            <span class="letter-count">${count} (${percentage}%)</span>
          </div>
        `;
      });

      letterDensityContainer.innerHTML = html;

      seeMoreBtn.textContent = showAllLetters ? 'See less ↑' : 'See more ↓';
    }

    seeMoreBtn.addEventListener('click', () => {
      showAllLetters = !showAllLetters;
      updateStats();
    });

    textInput.addEventListener('input', updateStats);
    excludeSpaces.addEventListener('change', updateStats);
    
    updateStats();
  </script>
</body>
</html>